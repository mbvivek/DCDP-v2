<template name="manageApprovals">
	<h4>
		<b>Manage Approvals</b>
	</h4>
	<div class="table-responsive">
		<table class="table table-bordered table-hover">
			<tbody>
				<tr>
					<th>Tracking ID</th>
					<th>Created On</th>
					<th>Name</th>
					<th>Type</th>
					<th>Admin Name</th>
					<th>Actions</th>
				</tr>
				{{#each org in orgsForApproval}}
				<tr>
					<td>{{shortTrackingId(org.trackingId)}}</td>
					<td>{{shortDate(org.time)}}</td>
					<td>{{org.orgName}}</td>
					<td>{{org.orgType}}</td>
					<td>{{org.adminName}}</td>
					<td>
						<button class="btn btn-sm btn-info viewOrgBtn" data-org={{org.trackingId}}>View/Approve</button>
						<button class="btn btn-sm btn-danger rejectOrgBtn" data-org={{org.trackingId}}>Reject</button>
					</td>
				</tr>
				{{/each}}</tbody>
		</table>
		<div id="viewOrgModal" class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-md" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title">
							<b>View / Approve Organization</b>
						</h4>
					</div>
					<div class="modal-body">
						<form id="approveOrgForm">
							<div class="col-lg-6 col-md-6">
								<div class="form-group">
									<label for="approveOrgForm_adminName">Admin Name</label>
									<input type="text" class="form-control" id="approveOrgForm_adminName" value={{selectedOrg.adminName}} readonly required>
								</div>
								<div class="form-group">
									<label for="approveOrgForm_adminUportAddr">Admin Uport Address</label>
									<input type="text" class="form-control" id="approveOrgForm_adminUportAddr" value={{selectedOrg.adminUportAddr}} readonly
									 required>
								</div>
								<div class="form-group">
									<label for="approveOrgForm_adminPK">Admin Public Key</label>
									<input type="text" class="form-control" id="approveOrgForm_adminPK" value={{selectedOrg.adminPK}} readonly required>
								</div>
							</div>
							<div class="col-lg-6 col-md-6">
								<div class="form-group">
									<label for="approveOrgForm_orgName">Organization Name</label>
									<input type="text" class="form-control" id="approveOrgForm_orgName" value={{selectedOrg.orgName}} required>
								</div>
								<div class="form-group">
									<label for="approveOrgForm_orgType">Organization Type</label>
									<select class="form-control" id="approveOrgForm_orgType">
										<option value="manufacturer">Manufacturer</option>
										<option value="distributor">Distributor</option>
										<option value="dispenser">Dispenser</option>
									</select>
								</div>
								<div class="form-group">
									<label for="approveOrgForm_orgAddr">Organization Address</label>
									<input type="text" class="form-control" id="approveOrgForm_orgAddr" value="{{selectedOrg.orgAddr}}" required>
								</div>
							</div>
							<div class="clearfix"></div>
							<hr>
							<div class="form-group">
								<div class="checkbox">
									<label>
										<input id="approveFormCheckBox" type="checkbox"> I have clearly verified the above information against the original documents and approving this organization.
									</label>
								</div>
							</div>
							<hr>
							<button id="approveFormSubmitBtn" type="submit" class="btn btn-primary">Approve</button>
						</form>
						<div id="attestQRCDiv" class="text-center">
							<h4>Attestation</h4>
							<p>User should scan the QRC</p>
							<img id="attestQRC" width="300px" height="auto" alt="Attest QRC">
						</div>
						<div id="approveFormMessagesDiv">
							<ol>
								{{#each msg in messages}}
								<li>
									{{#if msg.success}} {{msg.msg}}
									<i class="fa fa-check" style="color:green" aria-hidden="true"></i>
									{{else}} {{msg.msg}}
									<i class="fa fa-times" style="color:red" aria-hidden="true"></i>
									{{/if}}
								</li>
								{{/each}}
							</ol>
							{{#if onSuccessInfo.success}}
							<br>
							<div class="text-center">
								<h4>Success!</h4>
								<p>
									<b>{{onSuccessInfo.org.orgName}}</b> organization was created successfully.
									<br>
									<b>{{onSuccessInfo.user.name}}</b> is the default admin of the organization.
									<br>
									<br> Approved by:
									<b>{{onSuccessInfo.approver}}</b>
								</p>
							</div>
							{{/if}}
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<div id="rejectOrgModal" class="modal fade" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-md" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title">
							<b>Reject Organization</b>
						</h4>
					</div>
					<div class="modal-body">
						<h4 class="text-center" style="color:red">
							<b>You are about to reject an Organization</b>
						</h4>
						<p>
							<br> Org Name:
							<b>{{selectedOrg.orgName}}</b>
							<br> Org Type:
							<b>{{selectedOrg.orgType}}</b>
							<br> Org Address:
							<b>{{selectedOrg.orgAddr}}</b>
							<br> Admin Name:
							<b>{{selectedOrg.adminName}}</b>
							<br> Admin Uport Address:
							<b>{{selectedOrg.adminUportAddr}}</b>
							<br>
						</p>
						<br>
						<div class="form-group">
							<label for="rejectOrgForm_reason">Reason: </label>
							<textarea id="rejectOrgForm_reason" class="form-control" rows="3" cols="30"></textarea>
						</div>
						<div class="form-group">
							<button id="rejectOrgForm_submitBtn" class="btn btn-danger" data-org={{selectedOrg.trackingId}}>Reject</button>
							<div class="clearfix"></div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>